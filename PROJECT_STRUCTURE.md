# 📁 Структура проекта

Этот документ описывает структуру файлов и директорий проекта Corporate Phone Directory.

## 🗂️ Основные файлы

```
corporate-phone-directory/
├── 📄 index.php                    # Главная страница приложения
├── 📄 index_modern.php             # Ультрасовременная версия интерфейса
├── 📄 index_old.php                # Резервная копия старой версии
├── 🔧 api_search.php               # API для поиска сотрудников
├── 📊 api_metrics.php              # API для метрик использования
├── ⚙️ config.php                   # Конфигурация (НЕ коммитится)
├── 📋 config.example.php           # Пример конфигурации
└── 📁 logs/                        # Директория логов
```

## 📚 Документация

```
├── 📖 README.md                    # Основная документация
├── 🚀 DEPLOYMENT.md                # Руководство по развертыванию
├── 🤝 CONTRIBUTING.md              # Руководство для контрибьюторов
├── 📝 CHANGELOG.md                 # История изменений
├── 📁 PROJECT_STRUCTURE.md         # Этот файл
├── 📄 LICENSE                      # Лицензия MIT
└── 🚫 .gitignore                   # Игнорируемые файлы
```

## 🔍 Описание файлов

### Основные файлы приложения

#### `index.php`
- **Назначение**: Главная страница приложения
- **Содержит**: HTML, CSS, JavaScript для пользовательского интерфейса
- **Особенности**: 
  - Ультрасовременный дизайн с градиентами
  - Поддержка темной/светлой темы
  - Адаптивная верстка
  - Анимации и эффекты

#### `api_search.php`
- **Назначение**: REST API для поиска сотрудников
- **Параметры**: `q` - поисковый запрос
- **Возвращает**: JSON с результатами поиска
- **Особенности**:
  - Интеграция с LDAP/Active Directory
  - Фильтрация тестовых записей
  - Логирование запросов
  - Обработка ошибок

#### `api_metrics.php`
- **Назначение**: API для получения статистики использования
- **Возвращает**: JSON с метриками
- **Содержит**:
  - Общее количество поисков
  - Уникальных пользователей
  - Популярные запросы
  - Почасовую статистику

#### `config.php`
- **Назначение**: Основная конфигурация приложения
- **Содержит**:
  - Настройки LDAP
  - Параметры безопасности
  - Пути к файлам
  - Настройки логирования
- **⚠️ ВАЖНО**: Не коммитится в репозиторий!

#### `config.example.php`
- **Назначение**: Пример конфигурации
- **Использование**: Копируется в `config.php` при установке
- **Содержит**: Анонимизированные примеры настроек

### Директории

#### `logs/`
- **Назначение**: Хранение логов приложения
- **Содержит**:
  - `php_errors.log` - Ошибки PHP
  - `usage_metrics.json` - Метрики использования
- **Права доступа**: 755, владелец www-data

## 🔧 Конфигурационные файлы

### `.gitignore`
Игнорируемые файлы:
- `config.php` - реальная конфигурация
- `logs/` - логи приложения
- `*.log` - все лог файлы
- `.env` - переменные окружения
- `vendor/` - зависимости Composer
- Временные файлы IDE

### `.htaccess` (для Apache)
- Перенаправление на HTTPS
- Обработка API маршрутов
- Защита конфигурационных файлов
- Кэширование статических ресурсов

## 📊 Структура данных

### Конфигурация (`config.php`)

```php
return [
    'app' => [
        'name' => 'Corporate Phone Directory',
        'version' => '3.1.1',
        'debug' => false,
        'timezone' => 'Europe/Moscow',
    ],
    'ldap' => [
        'server' => 'ldap.yourcompany.com',
        'port' => 389,
        'base_dn' => 'DC=yourcompany,DC=com',
        'read_user' => 'service_account@yourcompany.com',
        'read_password' => 'your_password_here',
    ],
    // ... другие настройки
];
```

### API ответы

#### Поиск (`api_search.php`)
```json
{
  "results": [
    {
      "name": "Иванов Иван Иванович",
      "phone": "1234",
      "mobile": "8(999)123-45-67",
      "email": "i.ivanov@company.com",
      "title": "Инженер",
      "department": "IT отдел",
      "username": "i.ivanov"
    }
  ],
  "query": "иванов",
  "count": 1
}
```

#### Метрики (`api_metrics.php`)
```json
{
  "total_searches": 1250,
  "unique_users_today": 45,
  "hourly_searches": 12,
  "popular_queries": {
    "иванов": 25,
    "петров": 18,
    "сидоров": 15
  }
}
```

## 🎨 Структура стилей

### CSS переменные
```css
:root {
    --primary: #6366f1;
    --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --bg-card: rgba(255, 255, 255, 0.95);
    --shadow-glow: 0 0 20px rgba(99, 102, 241, 0.3);
}
```

### Основные классы
- `.container` - основной контейнер
- `.header` - заголовок страницы
- `.search-form` - форма поиска
- `.result-item` - элемент результата
- `.metrics` - блок метрик

## 🔒 Безопасность

### Защищенные файлы
- `config.php` - доступ запрещен через .htaccess
- `logs/` - доступ запрещен
- `*.log` - доступ запрещен

### Валидация
- Все пользовательские данные экранируются
- LDAP запросы защищены от инъекций
- CSRF защита включена
- XSS защита активна

## 📱 Адаптивность

### Breakpoints
- Desktop: > 768px
- Tablet: 768px - 480px
- Mobile: < 480px

### Адаптивные элементы
- Сетка результатов
- Форма поиска
- Навигация
- Метрики

## 🚀 Развертывание

### Требования
- PHP 8.3+
- Apache/Nginx
- LDAP расширение
- SSL сертификат (рекомендуется)

### Процесс
1. Клонирование репозитория
2. Копирование `config.example.php` в `config.php`
3. Настройка конфигурации
4. Создание директории `logs/`
5. Настройка веб-сервера
6. Тестирование

## 🔄 Обновления

### Версионирование
- Семантическое версионирование (SemVer)
- Major.Minor.Patch (например, 3.1.1)
- CHANGELOG.md обновляется при каждом релизе

### Миграции
- Конфигурация обратно совместима
- Новые функции опциональны
- Устаревшие функции помечаются в CHANGELOG

---

**Эта структура обеспечивает чистоту, безопасность и удобство сопровождения проекта.**
